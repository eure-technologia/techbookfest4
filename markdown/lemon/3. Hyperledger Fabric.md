# 3. Hyperledger Fabric
#技術書展

## 3.1 仮想通貨に依存しないブロックチェーン
ブロックチェーンの大半は仮想通貨の裏で動くインフラのような立ち位置としてあり、そこを利用してアプリケーションを開発するようなものも多いです。

それに対して、オープンソースのブロックチェーン基盤を世界的に使おうという流れがあります。
Linux Foundationが主導する、Hyperledgerプロジェクトと呼ばれるものです。

![](3.%20Hyperledger%20Fabric/Unknown.png)


Hyperledgerは分散台帳の共通規格として構想され、実際の実装されたものはいくつかあります。
1. Hyperledger Fabric(IBM)
2. Hyperledger Sawtooth(Intel)
3. Hyperledger Iroha (Soramitsu)

と様々な会社が実装したものを作っています。今回はこの中でもおそらく一番メジャーな
Hyperledger Fabricを使った環境構築と、簡単なブロックチェーンアプリケーションの実装をおこなってみましょう。

## 3.2 スマートコントラクト(チェーンコード)
HyperledgerFabricでは、スマートコントラクトを「チェーンコード」と読んでいます。
チェーンコードはGo, Typescript(Javascript)などに対応しています。

定義しなければいけない処理としては
* どういう資産をブロックチェーン上で管理するのか
* スマートコントラクト上に参加する人
* ビジネスロジック部分
* アクセス権限

といったものになります。
どういうユーザーがブロックチェーン上の情報を取れて取れないのかとか、
情報を使って何をどう判定するのかというような処理と、取引で用いる、あるいは
保存する資産（アセット）を定義してあげるようなイメージですね。

デプロイ、開発、定義、これらを比較的簡単に勧められるツールとしてHyperledger Composerがあります。

今回はそれを使ってスマートコントラクトの開発、並びにクライアントの開発を行っていきましょう。　

## 環境構築
Hyperledger FabricごHyperledger Composerの両方を構築し、簡単にプレイグランドで遊ぶところから始めましょう



# 技術書展_目次_分散技術とこれから
1. 分散の時代
2. ブロックチェーン
3. 採用例
4. Hyperledger fabric
	1. 仮想通貨に依存しないブロックチェーン
	2. スマートコントラクト（チェーンコード）
	3. 環境構築
	4. チェーンコードを実装してみよう(Hyperledger Composer)
	5. アプリケーションクライアントを実装してみよう
5. これからおきること

#技術書展

# 2. ブロックチェーン
#技術書展

最近、仮想通貨の話がよく聞こえるようになってきたものの
その裏側にあるブロックチェーンの技術ははさほど話題になっていない印象を受けます。

図. ブロックチェーンネットワーク
![](3.%20Hyperledger%20Fabric/basic_network.png)

ブロックチェーンは「分散してユーザー同士て管理するシステム」です。
厳密には、分散台帳と呼ばれています。

ブロックチェーンは次のような特徴があります。
	1. 改竄できない
	2. 中央集権化を防げる

ブロックチェーンは、仮想通貨の取引を守るシステムだけではありません。
あらゆる”取引”を守る技術としての可能性を秘めています。

ブロックチェーンでは、取引情報を書き込んだブロックをつなげた情報を
台帳と呼ばれる形で書き込みます。その台帳自体がブロックチェーンです。

とあるノード（サーバーインスタンスの台帳）に取引情報が送信され、
ブロックが生成されると、そのブロックが他のノードに送信されます。
その際、受け取ったブロックが正しいものであるかどうかを検証します。
この検証に通過すると、ブロックは他のノードにも追加されます。

ブロックは、[取引情報 + 前のブロックのハッシュ値 + TimeStamp]
などからなることが多いです。

1.の改ざんできない、という部分については、上記の取引情報のブロックが
必ず前のブロックに紐づいたハッシュ値を持っているという部分からきています。一度送信され台帳に書き込まれたものは後から取り外すことはできないのです。

2.の中央集権化を防げるという面については、ネットワーク上の他のノードにブロックを共有し、台帳に書き込まれるようになっていることから、どこかのサーバーの台帳が失われても大丈夫なつくりになっていることです。
これにより情報がどこかに集約されて、その集約されたところがリスクテイクをするという従来の管理システムとは全くことなるというところからきています。

図. スマートコントラクトとブロックチェーンのやりとり
![](3.%20Hyperledger%20Fabric/Smart_Contract.png)

## スマートコントラクト
それぞれのブロック上に書き込まれる情報や、取引の処理は「スマートコントラクト」と呼ばれ、いわゆるブロックチェーンにおけるアプリケーション層となっています。
上の図に記したように、スマートコントラクトによってトランザクション(tx)の情報が作成・更新され、それが台帳に書き込まれます。どういったデータや取引を書き込むのか、ビジネスロジックなどを示したものがスマートコントラクトに当たります。

## トランザクション
台帳状に書き込まれる一連の手続きを含んでいる処理のことを指します。
具体的には、仮想通貨のスマートコントラクトでは、「AliceさんがBobさんに100ドル渡した」
といったような手続きが書かれているものです。

この情報を受け取ったらブロックに書き込んで整合性を確認し、他の台帳にコンセンサス待ちのところへ送ります。




# 3. 採用例
ブロックチェーンはどんなところで使われることが多いでしょうか。

一見すると、取引という言葉からはお金のことが多そうですよね。

「お金2.0」という本では、「インターネット」という技術は情報の民主化を行ったが、「ブロックチェーン」は、経済の民主化を述べていました。



# 1. 分散の時代
#技術書展

フリマアプリをみんな使ったり、個人が個人間で仕事をもらってやるような